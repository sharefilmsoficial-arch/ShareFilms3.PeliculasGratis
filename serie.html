<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Serie</title>
<link rel="stylesheet" href="style.css">
<style>
  body {
    background: #041220;
    color: #fff;
    overflow-x: hidden;
  }

  .serie-container {
    display: flex;
    flex-wrap: wrap;
    gap: 32px;
    padding: 24px;
  }

  /* ===== Hero izquierdo ===== */
  .serie-hero {
    flex: 2;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    min-height: 60vh;
    display: flex;
    align-items: flex-end;
  }

  .serie-hero::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(2,8,15,0.3), rgba(2,8,15,0.95));
  }

  .serie-info {
    position: relative;
    z-index: 2;
    padding: 32px;
    max-width: 700px;
  }

  .serie-info h1 {
    margin: 0 0 10px;
    font-size: 36px;
  }

  .serie-info p {
    margin: 0 0 16px;
    opacity: 0.8;
  }

  .play-btn {
    padding: 14px 22px;
    background: #2b6be6;
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
  }

  .play-btn:hover {
    background: #478aff;
  }

  /* ===== Lista derecha ===== */
  .episodes-list {
    flex: 1;
    min-width: 280px;
    background: rgba(255,255,255,0.04);
    border-radius: 10px;
    padding: 16px;
    max-height: 80vh;
    overflow-y: auto;
  }

  .episodes-list h2 {
    margin: 0 0 16px;
    font-size: 20px;
    color: #00C0FF;
  }

  .episode-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: 8px;
    background: rgba(255,255,255,0.03);
    margin-bottom: 10px;
    transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
  }

  .episode-card:hover {
    background: rgba(0,192,255,0.1);
    transform: translateY(-2px);
    cursor: pointer;
  }

  .episode-card.active {
    background: rgba(0,192,255,0.2);
    box-shadow: 0 0 15px rgba(0,192,255,0.4);
    transform: scale(1.02);
  }

  .episode-card img {
    width: 60px;
    height: 40px;
    border-radius: 6px;
    object-fit: cover;
  }

  .episode-card span {
    font-size: 14px;
  }

  @media (max-width: 900px) {
    .serie-container {
      flex-direction: column;
    }
  }
</style>
</head>
<body class="movie-page">
<div class="back-btn"><a href="series.html">← Volver</a></div>

<div class="serie-container">
  <div class="serie-hero" id="serieHero">
    <div class="serie-info" id="serieInfo"></div>
  </div>
  <div class="episodes-list" id="episodesList"></div>
</div>

<script>
const SERIES = [
  {
    id: "whatif1",
    title: "What If...? Temporada 1",
    year: 2021,
    image: "series/What-If-TP1.WEBP",
    episodes: [
    {
      id: "episode-1",
      n: 1,
      name: "¿Qué pasaría si...Nebula se uniera a los Nova Corps?",
      thumb: "series/What-If-TP2-EP1.webp",
      image: "series/What-If-TP2-EP1.webp",
      drive: "https://drive.google.com/file/d/1E96HmGrSbO87lpaIe5qFeHjalIM41Us1/view"
    },
    {
      id: "episode-2",
      n: 2,
      name: "¿Qué pasaría si...Peter Quill atacara a los héroes más poderosos del planeta?",
      thumb: "series/What-If-TP2-EP2.webp",
      image: "series/What-If-TP2-EP2.webp",
      drive: "https://drive.google.com/file/d/1fMvWuHYCPXG9ccau4lMGRFS1pZ2vTnbS/view"
    },
    {
      id: "episode-3",
      n: 3,
      name: "¿Qué pasaría si...Happy Hogan salvara la Navidad?",
      thumb: "series/What-If-TP2-EP3.webp",
      image: "series/What-If-TP2-EP3.webp",
      drive: "https://drive.google.com/file/d/1ZSSsR0RiAfsBbfe6lMbsJKHgL7-Urm6L/view"
    },
    {
      id: "episode-4",
      n: 4,
      name: "¿Qué pasaría si...Iron Man se estrellara con el Gran Maestro?",
      thumb: "series/What-If-TP2-EP4.webp",
      image: "series/What-If-TP2-EP4.webp",
      drive: "https://drive.google.com/file/d/1HpVNBa_wJHH1HDMVmp9zSVH_hxn4k4by/view"
    },
    {
      id: "episode-5",
      n: 5,
      name: "¿Qué pasaría si...La Capitana Carter peleara contra del Hydra Stomper?",
      thumb: "series/What-If-TP2-EP5.webp",
      image: "series/What-If-TP2-EP5.webp",
      drive: "https://drive.google.com/file/d/1vooim-nQYe3sen468oYbRF6gDnn_bcxH/view"
    },
    {
      id: "episode-6",
      n: 6,
      name: "¿Qué pasaría si...Kahhori reformara el mundo?",
      thumb: "series/What-If-TP2-EP6.webp",
      image: "series/What-If-TP2-EP6.webp",
      drive: "https://drive.google.com/file/d/10P29jkyFp9klU36YCk7IznYvbwHHOsl3/view"
    }
  ]
},
  {
  id: "whatif2",
  title: "What If...? Temporada 2",
  year: 2023,
  image: "series/What-If-TP2.webp",
  episodes: [
    {
      id: "episode-1",
      n: 1,
      name: "¿Qué pasaría si...Nebula se uniera a los Nova Corps?",
      thumb: "series/What-If-TP2-EP1.webp",
      image: "series/What-If-TP2-EP1.webp",
      drive: "https://drive.google.com/file/d/1E96HmGrSbO87lpaIe5qFeHjalIM41Us1/view"
    },
    {
      id: "episode-2",
      n: 2,
      name: "¿Qué pasaría si...Peter Quill atacara a los héroes más poderosos del planeta?",
      thumb: "series/What-If-TP2-EP2.webp",
      image: "series/What-If-TP2-EP2.webp",
      drive: "https://drive.google.com/file/d/1fMvWuHYCPXG9ccau4lMGRFS1pZ2vTnbS/view"
    },
    {
      id: "episode-3",
      n: 3,
      name: "¿Qué pasaría si...Happy Hogan salvara la Navidad?",
      thumb: "series/What-If-TP2-EP3.webp",
      image: "series/What-If-TP2-EP3.webp",
      drive: "https://drive.google.com/file/d/1ZSSsR0RiAfsBbfe6lMbsJKHgL7-Urm6L/view"
    },
    {
      id: "episode-4",
      n: 4,
      name: "¿Qué pasaría si...Iron Man se estrellara con el Gran Maestro?",
      thumb: "series/What-If-TP2-EP4.webp",
      image: "series/What-If-TP2-EP4.webp",
      drive: "https://drive.google.com/file/d/1HpVNBa_wJHH1HDMVmp9zSVH_hxn4k4by/view"
    },
    {
      id: "episode-5",
      n: 5,
      name: "¿Qué pasaría si...La Capitana Carter peleara contra del Hydra Stomper?",
      thumb: "series/What-If-TP2-EP5.webp",
      image: "series/What-If-TP2-EP5.webp",
      drive: "https://drive.google.com/file/d/1vooim-nQYe3sen468oYbRF6gDnn_bcxH/view"
    },
    {
      id: "episode-6",
      n: 6,
      name: "¿Qué pasaría si...Kahhori reformara el mundo?",
      thumb: "series/What-If-TP2-EP6.webp",
      image: "series/What-If-TP2-EP6.webp",
      drive: "https://drive.google.com/file/d/10P29jkyFp9klU36YCk7IznYvbwHHOsl3/view"
    }
  ]
},
{
    id: "scissors-seven-3",
    title: "Seven Scissors Temporada 3",
    year: 2024,
    image: "https://static1.cbrimages.com/wordpress/wp-content/uploads/2023/07/seven-deadly-sins-4.jpg",
    episodes: [
      { id: "episode-1", n: 1, name: "Adiós", thumb: "series/seven/ep1.webp", image: "series/scissorseventp3/banner1.webp",  drive: "https://drive.google.com/file/d/1yngaswNlea3uEVTbvr3_iqPOyaZHPwal/preview" },
      { id: "episode-2", n: 2, name: "Lazos rotos", thumb: "series/seven/ep2.webp", image: "series/scissorseventp3/banner2.webp", drive: "https://drive.google.com/file/d/7A2/view" },
      { id: "episode-3", n: 3, name: "Pecados vs Ángeles", thumb: "series/seven/ep3.webp", image: "series/scissorseventp3/banner3.webp", drive: "https://drive.google.com/file/d/7A3/view" }
    ]
  }
];

const params = new URLSearchParams(location.search);
const serieId = params.get('id');
const epParam = params.get('ep'); // nuevo parámetro para episodio
const serie = SERIES.find(s => s.id === serieId);

if (!serie) {
  document.body.innerHTML = '<p style="padding:40px">Serie no encontrada. <a href="series.html">Volver</a></p>';
  throw new Error("Serie no encontrada");
}

// si hay ep en la URL, selecciona ese episodio, si no, el primero
let currentEp = epParam ? serie.episodes.find(e => e.n == epParam) : serie.episodes[0];

// render principal
function renderHero(ep) {
  const hero = document.getElementById('serieHero');
  const bgImage = ep.image ? ep.image : serie.image; // usa la imagen del episodio si existe
  hero.style.backgroundImage = `url(${bgImage})`;

  document.getElementById('serieInfo').innerHTML = `
    <h1>${serie.title}</h1>
    <p>${serie.year} • Episodio ${ep.n}: ${ep.name}</p>
    <button class="play-btn" onclick="window.open('${ep.drive}', '_blank')">▶ Reproducir</button>
  `;
}
function renderList() {
  const list = document.getElementById('episodesList');
  list.innerHTML = '<h2>Episodios</h2>' +
    serie.episodes.map(ep => `
      <div class="episode-card ${ep.n === currentEp.n ? 'active' : ''}" onclick="selectEpisode(${ep.n})">
        <img src="${ep.thumb}" alt="Ep ${ep.n}">
        <span><strong>E${ep.n}:</strong> ${ep.name}</span>
      </div>
    `).join('');
}

function selectEpisode(num) {
  currentEp = serie.episodes.find(e => e.n === num);
  history.replaceState(null, '', `?id=${serie.id}&ep=${num}`); // actualiza la URL sin recargar
  renderHero(currentEp);
  renderList();
}

// inicializar
renderHero(currentEp);
renderList();
</script>
</body>
</html>
